(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{4282:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(3866)}])},3866:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return Login}});var r=s(4246),a=s(7378),t=s(6676),i=s.n(t),o=s(8315),l=s(4105),c=s(8830),d=s(6677),u=s.n(d),h=s(5570),p=s(9894),g=s.n(p),m=s(6218),f=s(333);function Login(){let[e,n]=(0,a.useState)(""),[s,t]=(0,a.useState)(""),[d,p]=(0,a.useState)(""),[x,v]=(0,a.useState)(""),[j,w]=(0,a.useState)(!1),[y,A]=(0,a.useState)(!1),verifyRecaptcha=async e=>{try{let n=await c.Z.post("https://www.google.com/recaptcha/api/siteverify",null,{params:{secret:"6Lcoi9onAAAAAJ_rNHdtMM7EGmubvFQC8slUHiTt",response:e}}),s=n.data;return s.success}catch(e){return console.error("Error verifying reCAPTCHA:",e),!1}},_handleLogin=async()=>{try{var e,r,a,t;if(!s||!d){n("Please enter a username password ");return}if(!j){n("Please verify the ReCAPTCHA");return}await verifyRecaptcha(x);let i=await (0,c.Z)({method:"post",maxBodyLength:1/0,url:"/api/auth/signin",headers:{"Content-Type":"application/json"},data:JSON.stringify({username:s,password:d})});(null==i?void 0:null===(r=i.data)||void 0===r?void 0:null===(e=r.result)||void 0===e?void 0:e.id)&&(console.log(null==i?void 0:null===(t=i.data)||void 0===t?void 0:null===(a=t.result)||void 0===a?void 0:a.id),console.log("Login successful!"),await c.Z.post("/api/log/addlog",{event_happening:"".concat(s," signed in ")}),u().push("/template"),localStorage.setItem("usernamelogin",s))}catch(e){c.Z.isAxiosError(e)&&e.response&&n("Invalid username or password"),console.log("err=========>",e)}};return(0,r.jsxs)("main",{className:"bg",children:[(0,r.jsx)("title",{children:"Sign in to SeniorProject"}),(0,r.jsx)("div",{className:"beforelogin",children:(0,r.jsxs)("form",{children:[(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("label",{className:"signin",htmlFor:"signin",children:(0,r.jsx)("b",{children:(0,r.jsx)("h1",{children:"SIGN IN"})})}),(0,r.jsx)("label",{htmlFor:"uname",children:(0,r.jsx)("b",{children:"Username"})}),(0,r.jsx)("input",{type:"text",placeholder:"Enter Username",name:"uname",required:!0,value:s,onChange:e=>t(e.target.value)}),(0,r.jsx)("label",{htmlFor:"psw",children:(0,r.jsx)("b",{children:"Password"})}),(0,r.jsx)(l.Z,{type:y?"text":"password",placeholder:"Enter Password",name:"psw",required:!0,value:d,onChange:e=>p(e.target.value),suffix:y?(0,r.jsx)(m.default,{onClick:()=>A(!y),style:{cursor:"pointer"}}):(0,r.jsx)(f.default,{onClick:()=>A(!y),style:{cursor:"pointer"}})}),(0,r.jsx)(o.Z,{className:"b",children:(0,r.jsx)(g(),{href:"/forgotpassword",children:"forgot password"})}),(0,r.jsx)("div",{className:"cc",children:(0,r.jsx)(h.Z,{sitekey:"6Lcoi9onAAAAAMeXsjmOo05DRzAg1g3yuJqx9yqS",onChange:e=>{w(!0),v(e||"")}})}),(0,r.jsx)(i(),{className:"buttonlogin",type:"primary",onClick:_handleLogin,children:"Login"})]}),(0,r.jsx)("p",{children:e})]})})]})}}},function(e){e.O(0,[676,830,542,570,476,129,774,888,179],function(){return e(e.s=4282)}),_N_E=e.O()}]);
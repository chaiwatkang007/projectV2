(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{8187:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return s(8188)}])},8188:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return Register}});var r=s(4246),a=s(7378),t=s(6676),i=s.n(t),l=s(8830),o=s(6677),u=s.n(o);function Register(){let[e,n]=(0,a.useState)(""),[s,t]=(0,a.useState)(""),[o,d]=(0,a.useState)(""),[c,h]=(0,a.useState)(""),_handleRegister=async()=>{try{var e,r;if(!o||!c||!s){n("Please enter a email username and password");return}let a=await (0,l.Z)({method:"post",maxBodyLength:1/0,url:"/api/user/create",headers:{"Content-Type":"application/json"},data:JSON.stringify({email:s,username:o,password:c,role:"user"})});(null==a?void 0:null===(r=a.data)||void 0===r?void 0:null===(e=r.result)||void 0===e?void 0:e.id)&&(console.log("Sign Up successful!"),await l.Z.post("/api/log/addlog",{event_happening:"".concat(o," new user signed up ")}),u().push("/login"))}catch(e){l.Z.isAxiosError(e)&&e.response&&n("มีผู้ใช้งานนี้ในระบบแล้ว")}};return(0,r.jsxs)("main",{className:"bg",children:[(0,r.jsx)("title",{children:"Sign up to SeniorProject"}),(0,r.jsx)("div",{className:"register",children:(0,r.jsxs)("form",{children:[(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("label",{className:"signup",htmlFor:"signup",children:(0,r.jsx)("b",{children:(0,r.jsx)("h1",{children:"SIGN UP"})})}),(0,r.jsx)("label",{htmlFor:"uname",children:(0,r.jsx)("b",{children:"Email"})}),(0,r.jsx)("input",{type:"text",placeholder:"Enter Email",name:"em",required:!0,value:s,onChange:e=>t(e.target.value)}),(0,r.jsx)("label",{htmlFor:"uname",children:(0,r.jsx)("b",{children:"Username"})}),(0,r.jsx)("input",{type:"text",placeholder:"Enter Username",name:"uname",required:!0,value:o,onChange:e=>d(e.target.value)}),(0,r.jsx)("label",{htmlFor:"psw",children:(0,r.jsx)("b",{children:"Password"})}),(0,r.jsx)("input",{type:"password",placeholder:"Enter Password",name:"psw",required:!0,value:c,onChange:e=>h(e.target.value)}),(0,r.jsx)(i(),{className:"buttonlogin",type:"primary",onClick:_handleRegister,children:"SIGN UP"})]}),(0,r.jsx)("p",{children:e})]})})]})}},6677:function(e,n,s){e.exports=s(6250)}},function(e){e.O(0,[676,830,774,888,179],function(){return e(e.s=8187)}),_N_E=e.O()}]);
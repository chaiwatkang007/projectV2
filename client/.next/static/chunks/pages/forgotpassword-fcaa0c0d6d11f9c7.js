(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[765],{8196:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/forgotpassword",function(){return t(4741)}])},4741:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Forgotpassword}});var s=t(4246),a=t(7378),n=t(6676),o=t.n(n),i=t(8830),l=t(5570),c=t(6677),u=t.n(c);function Forgotpassword(){let[e,r]=(0,a.useState)(""),[t,n]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[h,p]=(0,a.useState)(!1),verifyRecaptcha=async e=>{try{let r=await i.Z.post("https://www.google.com/recaptcha/api/siteverify",null,{params:{secret:"6Lcoi9onAAAAAJ_rNHdtMM7EGmubvFQC8slUHiTt",response:e}}),t=r.data;return t.success}catch(e){return console.error("Error verifying reCAPTCHA:",e),!1}},_handleForgorpassword=async()=>{try{if(!t){r("Please enter your email");return}if(!h){r("Please verify the ReCAPTCHA");return}await verifyRecaptcha(c);let e=function(e){let r="0123456789",t="";for(let e=0;e<6;e++){let e=Math.floor(Math.random()*r.length);t+=r.charAt(e)}return t}(0);await (0,i.Z)({method:"post",maxBodyLength:1/0,url:"/api/user/sendmail",headers:{"Content-Type":"application/json"},data:JSON.stringify({email:t,verify:e})});let s=!1;for(;!s;){let a=prompt("Please enter the verification code from the email:");a===e?(console.log("Verification code matched!"),s=!0,u().push("/resetpassword?email=".concat(t))):r("รหัสยืนยันไม่ถูกต้อง")}}catch(e){i.Z.isAxiosError(e)&&e.response&&r("ไม่พบ Email นี้อยู่ในระบบ")}};return(0,s.jsxs)("main",{className:"bg",children:[(0,s.jsx)("title",{children:"Forgot Password"}),(0,s.jsx)("div",{className:"register",children:(0,s.jsxs)("form",{children:[(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("label",{className:"signup",htmlFor:"signup",children:(0,s.jsx)("b",{children:(0,s.jsx)("h1",{children:"Forgot Password"})})}),(0,s.jsx)("label",{htmlFor:"uemail",children:(0,s.jsx)("b",{children:"Email"})}),(0,s.jsx)("input",{type:"text",placeholder:"Enter your Email",name:"uemail",required:!0,value:t,onChange:e=>n(e.target.value)}),(0,s.jsx)("div",{className:"cc",children:(0,s.jsx)(l.Z,{sitekey:"6Lcoi9onAAAAAMeXsjmOo05DRzAg1g3yuJqx9yqS",onChange:e=>{p(!0),d(e||"")}})}),(0,s.jsx)(o(),{className:"buttonlogin",type:"primary",onClick:_handleForgorpassword,children:"SEND ME"})]}),(0,s.jsx)("p",{children:e})]})})]})}},6677:function(e,r,t){e.exports=t(6250)}},function(e){e.O(0,[676,830,570,774,888,179],function(){return e(e.s=8196)}),_N_E=e.O()}]);
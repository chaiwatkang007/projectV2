(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569],{5799:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/resetpassword",function(){return n(6652)}])},6652:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return Resetpassowrd}});var a=n(4246),r=n(7378),t=n(6676),l=n.n(t),i=n(8830),o=n(6677);function Resetpassowrd(){let e=(0,o.useRouter)(),{email:s}=e.query,[n,t]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),_handleReset=async()=>{try{if(!d||!u){t("Please enter a  username and password");return}if(d!==u){t("New password and confirm password don't match");return}let n=await (0,i.Z)({method:"post",maxBodyLength:1/0,url:"/api/user/update",headers:{"Content-Type":"application/json"},data:JSON.stringify({email:s,password:d})});(null==n?void 0:n.data)&&(console.log("Reset password successful!"),t("Reset password successful!"),await i.Z.post("/api/log/addlog",{event_happening:"".concat(s," Reset password")}),e.push("/login"))}catch(e){i.Z.isAxiosError(e)&&e.response&&t("ไม่สามารถเปลี่ยนรหัสได้หรือรหัสผ่านซ้ำกับอันเดิม")}};return(0,a.jsxs)("main",{className:"bg",children:[(0,a.jsx)("title",{children:"Sign in to SeniorProject"}),(0,a.jsx)("div",{className:"beforelogin",children:(0,a.jsxs)("form",{children:[(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("label",{className:"signin",htmlFor:"signin",children:(0,a.jsx)("b",{children:(0,a.jsx)("h1",{children:"Reset Password"})})}),(0,a.jsx)("label",{htmlFor:"uname",children:(0,a.jsx)("b",{children:"Email"})}),(0,a.jsx)("input",{type:"text",placeholder:"Enter Email",name:"em",required:!0,value:s,disabled:!0}),(0,a.jsx)("label",{htmlFor:"uname",children:(0,a.jsx)("b",{children:"New password"})}),(0,a.jsx)("input",{type:"password",placeholder:"Enter New Password",name:"uname",required:!0,value:d,onChange:e=>c(e.target.value)}),(0,a.jsx)("label",{htmlFor:"psw",children:(0,a.jsx)("b",{children:"Password"})}),(0,a.jsx)("input",{type:"password",placeholder:"New Password again",name:"psw",required:!0,value:u,onChange:e=>p(e.target.value)}),(0,a.jsx)("div",{className:"cc"}),(0,a.jsx)(l(),{className:"buttonlogin",type:"primary",onClick:_handleReset,children:"RESET PASSWORD"})]}),(0,a.jsx)("p",{children:n})]})})]})}},6677:function(e,s,n){e.exports=n(6250)}},function(e){e.O(0,[676,830,774,888,179],function(){return e(e.s=5799)}),_N_E=e.O()}]);